name: Replace "Shannon" with "Joe" in events.md

on:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  replace_text:
    runs-on: ubuntu-latest
    steps:
      - name: ‚¨áÔ∏è Checkout Repository
        # Checks out your repository so the workflow can access it
        uses: actions/checkout@v4

      - name: ‚úçÔ∏è Replace "Shannon" with "Joe"
        id: replacement
        run: |
          # Use sed to find all occurrences of "Shannon" and replace them with "Joe" 
          # The -i flag edits the file in place
          # We use a temporary file to ensure compatibility across different sed versions/OSes
          sed -i.bak 's/Shannon/Joe/g' events.md
          
          # Clean up the backup file
          rm events.md.bak

      - name: üíæ Commit and Push Changes (Always)
        # This step will now always execute, regardless of whether a replacement occurred
        uses: stefanprodan/git-tools@v1
        with:
          # Configuration for the git commit
          command: |
            git config user.name "github-actions[bot]"
            git config user.email "github-actions[bot]@users.noreply.github.com"
            # Add the file to stage for commit
            git add events.md
            # Commit changes. If no changes are staged, this will return an error 
            # unless you use the --allow-empty flag (which is not recommended here).
            # We rely on 'git push' to handle the 'no changes' scenario gracefully.
            git commit -m "Automated: Replace 'Shannon' with 'Joe' in events.md" || echo "No changes to commit."
            git push
